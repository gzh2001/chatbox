"use strict";(self.webpackChunkxyz_chatboxapp_ce=self.webpackChunkxyz_chatboxapp_ce||[]).push([[2039],{22039:(e,t,l)=>{l.r(t),l.d(t,{component:()=>E,getEmptyCopilot:()=>T});var r=l(74848),o=l(26307),a=l(31300),n=l(12489),i=l(93351),s=l(8097),d=l(83250),c=l(23342),p=l(36920),x=l(80316),u=(l(9470),l(31330)),m=l(28597),h=l(34862),f=l(9257),j=l(84887),v=l(14992),g=l(81385),A=l(14073),C=l(11641),y=l(73896),w=l(71543),b=l(79806),k=l(10423),D=l(44675),S=l(42471),U=l(65724),F=l(68864),M=l(36379),W=l(833),N=l(61224),_=l(52166),B=l(34843),z=l(96540),R=l(34195),L=l(62938);l(65958);function $(e){const{t}=(0,R.Bd)(),[l,a]=z.useState(null),i=Boolean(l),s=()=>{a(null)};return(0,r.jsxs)(v.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",padding:"5px",margin:"5px",cursor:"pointer",".edit-icon":{opacity:0},"&:hover .edit-icon":{opacity:1}},className:"w-full sm:w-48 hover:bg-slate-400/25 border-solid border-slate-400/20 rounded-md",onClick:t=>{t.preventDefault(),i||e.useMe()},children:[(0,r.jsx)(g.A,{sizes:"30px",sx:{width:"30px",height:"30px"},src:e.detail.picUrl}),(0,r.jsx)("div",{style:{marginLeft:"5px"},className:"w-full sm:w-28",children:(0,r.jsx)(A.A,{variant:"body1",noWrap:!0,children:e.detail.name})}),"local"===e.mode&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{width:"30px",height:"10px",marginLeft:"2px",display:"flex",alignItems:"center"},children:(0,r.jsx)(C.A,{onClick:e=>{e.stopPropagation(),e.preventDefault(),a(e.currentTarget)},children:e.detail.starred?(0,r.jsx)(f.A,{color:"primary",fontSize:"small"}):(0,r.jsx)(h.A,{className:"edit-icon",color:"primary",fontSize:"small"})})}),(0,r.jsxs)(n.A,{MenuListProps:{"aria-labelledby":"long-button"},anchorEl:l,open:i,onClose:s,children:[(0,r.jsx)(y.A,{onClick:()=>{e.switchStarred(),s()},disableRipple:!0,children:e.detail.starred?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.A,{fontSize:"small"}),t("unstar")]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.A,{fontSize:"small"}),t("star")]})},"star"),(0,r.jsxs)(y.A,{onClick:()=>{e.editMe(),s()},disableRipple:!0,children:[(0,r.jsx)(m.A,{}),t("edit")]},"edit"),(0,r.jsx)(w.A,{sx:{my:.5}}),(0,r.jsx)(o.i,{onDelete:()=>{a(null),s(),e.deleteMe()}})]})]})]})}function I(e){return(0,r.jsx)(v.A,{sx:{marginTop:"14px"},children:(0,r.jsx)(b.A,{component:"a",value:e.currentValue,onChange:(t,l)=>{e.onChange(l)},variant:"scrollable",scrollButtons:!1,children:e.values.map((e=>(0,r.jsx)(k.A,{label:e.label,value:e.value},e.value)))})})}function O(e){const{t}=(0,R.Bd)(),l=(0,D.A)(),o=(0,s.L0)(),[a,n]=(0,z.useState)(e.copilotDetail);(0,z.useEffect)((()=>{n(e.copilotDetail)}),[e.copilotDetail]);const[i,c]=(0,z.useState)({name:(0,r.jsx)(r.Fragment,{}),prompt:(0,r.jsx)(r.Fragment,{})}),p=e=>t=>{c({name:(0,r.jsx)(r.Fragment,{}),prompt:(0,r.jsx)(r.Fragment,{})}),n({...a,[e]:t.target.value})};return(0,r.jsxs)(v.A,{sx:{marginBottom:"20px",backgroundColor:"dark"===l.palette.mode?l.palette.grey[700]:l.palette.grey[50],padding:"8px"},children:[(0,r.jsx)(S.A,{autoFocus:!o,margin:"dense",label:t("Copilot Name"),fullWidth:!0,variant:"outlined",placeholder:t("My Assistant")||"",value:a.name,onChange:p("name"),helperText:i.name}),(0,r.jsx)(S.A,{margin:"dense",label:t("Copilot Prompt"),placeholder:t("Copilot Prompt Demo")||"",fullWidth:!0,variant:"outlined",multiline:!0,minRows:4,maxRows:10,value:a.prompt,onChange:p("prompt"),helperText:i.prompt}),(0,r.jsx)(S.A,{margin:"dense",label:t("Copilot Avatar URL"),placeholder:"http://xxxxx/xxx.png",fullWidth:!0,variant:"outlined",value:a.picUrl,onChange:p("picUrl")}),(0,r.jsxs)(v.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(U.A,{row:!0,children:(0,r.jsx)(F.A,{control:(0,r.jsx)(M.A,{}),label:t("Share with Chatbox"),checked:a.shared,onChange:(e,t)=>n({...a,shared:t})})}),(0,r.jsxs)(W.A,{children:[(0,r.jsx)(N.A,{variant:"outlined",onClick:()=>e.close(),children:t("cancel")}),(0,r.jsx)(N.A,{variant:"contained",onClick:()=>{a.name=a.name.trim(),a.prompt=a.prompt.trim(),a.picUrl&&(a.picUrl=a.picUrl.trim()),0!==a.name.length?0!==a.prompt.length?(e.save(a),(0,d.i)("create_copilot",{event_category:"user"})):c({...i,prompt:(0,r.jsx)("p",{style:{color:"red"},children:t("cannot be empty")})}):c({...i,name:(0,r.jsx)("p",{style:{color:"red"},children:t("cannot be empty")})})},children:t("save")})]})]})]})}async function T(){return{id:`${(await p.A.getConfig()).uuid}:${(0,L.A)()}`,name:"",picUrl:"",prompt:"",starred:!1,usedCount:0,shared:!0}}const E=function(){const[e,t]=(0,B.fp)(x.eF),l=(0,_.Z)(),{t:o}=(0,R.Bd)(),n=(0,i.v)(),{copilots:s}=(0,i.x)(),p=e=>{const r={...e,usedCount:(e.usedCount||0)+1};r.shared&&c.lt(r),n.addOrUpdate(r),l({to:"/",search:{copilotId:e.id}}),t(!1)},[m,h]=(0,z.useState)(null);(0,z.useEffect)((()=>{e?(0,d.i)("copilot_window",{event_category:"screen_view"}):h(null)}),[e]);const f=[...n.copilots.filter((e=>e.starred)).sort(((e,t)=>t.usedCount-e.usedCount)),...n.copilots.filter((e=>!e.starred)).sort(((e,t)=>t.usedCount-e.usedCount))];return(0,r.jsx)(a.A,{title:o("My Copilots"),children:(0,r.jsxs)("div",{className:"p-4 max-w-4xl mx-auto",children:[m?(0,r.jsx)(O,{copilotDetail:m,close:()=>{h(null)},save:e=>{n.addOrUpdate(e),h(null)}}):(0,r.jsx)(N.A,{variant:"outlined",startIcon:(0,r.jsx)(u.A,{}),onClick:()=>{T().then(h)},children:o("Create New Copilot")}),(0,r.jsx)(I,{values:[{value:"my",label:o("My Copilots")}],currentValue:"my",onChange:()=>{}}),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",overflowY:"auto",overflowX:"hidden"},children:f.map(((e,t)=>(0,r.jsx)($,{mode:"local",detail:e,useMe:()=>p(e),switchStarred:()=>{n.addOrUpdate({...e,starred:!e.starred})},editMe:()=>{h(e)},deleteMe:()=>{n.remove(e.id)}},`${e.id}_${t}`)))}),(0,r.jsx)(I,{values:[{value:"chatbox-featured",label:o("Chatbox Featured")}],currentValue:"chatbox-featured",onChange:()=>{}}),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",overflowY:"auto",overflowX:"hidden"},children:s?.map(((e,t)=>(0,r.jsx)($,{mode:"remote",detail:e,useMe:()=>p(e)},`${e.id}_${t}`)))})]})})}},31300:(e,t,l)=>{l.d(t,{A:()=>m});var r=l(74848),o=l(44675),a=l(14992),n=l(11641),i=l(14073),s=l(34843),d=l(49921),c=l(24648),p=l(8097),x=l(63635),u=l(80316);const m=({children:e,title:t,left:l})=>{const[m,h]=(0,s.fp)(u.f1),f=(0,p.L0)(),j=(0,o.A)(),{needRoomForMacWindowControls:v}=(0,c.A)();return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:(0,x.cn)("flex flex-row items-center pt-1",f?"":m?"sm:pl-3 sm:pr-2":"pr-2",m&&!f||!v?"pl-3":"pl-20"),style:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:j.palette.divider},children:[l||(!m||f)&&(0,r.jsx)(a.A,{onClick:()=>h(!m),children:(0,r.jsx)(n.A,{sx:f?{borderColor:j.palette.action.hover,borderStyle:"solid",borderWidth:1}:{},children:(0,r.jsx)(d.A,{size:"20",strokeWidth:1.5})})}),(0,r.jsx)("div",{className:(0,x.cn)("title-bar w-full mx-auto flex flex-row","py-2 h-12"),children:"string"==typeof t?(0,r.jsx)(i.A,{variant:"h6",color:"inherit",component:"div",noWrap:!0,sx:{flex:1,overflow:"hidden",textOverflow:"ellipsis",maxWidth:f?"12rem":"18rem"},className:(0,x.cn)("flex items-center",m?"ml-3":"ml-1"),children:t}):t})]}),(0,r.jsx)("div",{className:"flex-1 overflow-auto",children:e})]})}},93351:(e,t,l)=>{l.d(t,{v:()=>i,x:()=>s});var r=l(23342),o=l(34843),a=l(80316),n=l(97286);function i(){const[e,t]=(0,o.fp)(a.Rf);return{copilots:e,addOrUpdate:e=>{t((t=>{let l=!1;const r=t.map((t=>t.id===e.id?(l=!0,e):t));return l||r.push(e),r}))},remove:e=>{t((t=>t.filter((t=>t.id!==e))))}}}function s(){const e=(0,o.md)(a.an),{data:t,...l}=(0,n.I)({queryKey:["remote-copilots",e],queryFn:()=>r.Gg(e),initialData:[],initialDataUpdatedAt:0,staleTime:36e5});return{copilots:t,...l}}}}]);