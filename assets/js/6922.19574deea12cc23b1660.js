(self.webpackChunkxyz_chatboxapp_ce=self.webpackChunkxyz_chatboxapp_ce||[]).push([[6922],{52284:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(74848),r=s(40054),i=s(17826);const o=["#1ABC9C","#3498DB","#9B59B6","#E67E22","#E74C3C","#2ECC71","#34495E","#F1C40F","#F39C12","#16A085","#2980B9","#8E44AD","#2C3E50","#C0392B","#27AE60","#7F8C8D"],a=({providerId:e,providerName:t,size:s=32})=>{const a=t.slice(0,1).toUpperCase()||"X",c=o[e.split("").reduce(((e,t)=>e+t.charCodeAt(0)),0)%o.length],l=s/32;return(0,n.jsx)(r.s,{w:s,h:s,bg:c,align:"center",justify:"center",className:"rounded-full overflow-hidden",children:(0,n.jsx)(i.E,{span:!0,c:"white",fz:16,fw:"500",lh:1,style:{transform:`scale(${l})`},children:a})})}},66922:(e,t,s)=>{"use strict";s.d(t,{A:()=>Ae});var n=s(74848),r=s(99460),i=s(11507),o=s(69019),a=s(55917),c=s(40054),l=s(12335),d=s(48324),p=s(5055),u=s(99104),h=s(17826),x=s(18649),m=s(26782),g=s(44992),b=s(53479),f=s(41081),j=s(38365),v=s(56695),y=s(9763),w=s(84061),k=s(9203),C=s(46525),A=s(24674),S=s(65262),N=s(35583),B=s(34843),W=s(2543),z=s.n(W),M=s(96540),I=s(83882),D=s(34195),E=s(84929);const T=(0,E.tG)("input-box-history",[]),K=()=>{const[e,t]=(0,M.useState)(-1),[s,n]=(0,B.fp)(T);return{inputBoxHistory:s,addInputBoxHistory:e=>{n([e,...s.filter((t=>t!==e))].slice(0,20))},clearInputBoxHistory:()=>{n([])},getPreviousHistoryInput:()=>{if(e<s.length-1){const n=e+1;return t(n),s[n]}},getNextHistoryInput:()=>{if(e>0){const n=e-1;return t(n),s[n]}},resetHistoryIndex:()=>{t(-1)}}};var L=s(70266),P=s(8097),_=s(63635),O=s(83250),F=s(82188),H=s(36920),q=s(12268),R=s(46929),$=s(58348),G=s(83884),U=s(33351),X=s(45261),V=s(80316),Y=s(43639),Q=s(88522),Z=s(4913),J=s(53987),ee=s(24597);const te=({onSelect:e,children:t,...s})=>{const{providers:r}=(0,L.u)(),i=r.filter((e=>[ee.wU.OpenAI,ee.wU.Azure,""].includes(e.id))),o=(0,Z.B)({onDropdownClose:()=>{o.resetSelectedOption(),o.focusTarget()}});return(0,n.jsxs)(J.G,{store:o,width:260,position:"top",withinPortal:!0,...s,onOptionSubmit:t=>{e?.(t,"DALL-E-3"),o.closeDropdown()},children:[(0,n.jsx)(J.G.Target,{targetType:"button",children:(0,n.jsx)("button",{onClick:()=>o.toggleDropdown(),className:"border-none bg-transparent p-0 flex",children:t})}),(0,n.jsx)(J.G.Dropdown,{children:(0,n.jsxs)(J.G.Options,{mah:500,style:{overflowY:"auto"},children:[(0,n.jsx)(J.G.Option,{value:ee.wU.ChatboxAI,c:"chatbox-primary",children:"Chatbox AI"}),i.map((e=>(0,n.jsxs)(J.G.Option,{value:e.id,c:"chatbox-primary",children:[e.name," (DALL-E-3)"]},e.id)))]})})]})};var se=s(31074),ne=s(52284);const re=s(2552),ie=re.keys().map((e=>({name:e.replace("./","").replace(".png",""),src:re(e)})));function oe(e){const{className:t,size:s=24,provider:r,providerName:i}=e,{providers:o}=(0,L.u)(),a=o.find((e=>e.id===r));if(a?.isCustom)return a.iconUrl?(0,n.jsx)(se._,{w:s,h:s,src:a.iconUrl,alt:a.name}):(0,n.jsx)(ne.A,{providerId:a.id,providerName:a.name,size:s});const c=ie.find((e=>e.name===r))?.src;return c?(0,n.jsx)(se._,{w:s,h:s,src:c,className:t,alt:`${i||r} image icon`}):i?(0,n.jsx)(ne.A,{providerId:r,providerName:i,size:s}):null}var ae=s(64999),ce=s(47972),le=s(28775),de=s(20899),pe=s(39681),ue=s(80697),he=s(77439);const xe=e=>{const{data:t}=(0,he.IM)(),{t:s}=(0,D.Bd)();return(0,n.jsxs)(u.W,{position:"top",shadow:"md",keepMounted:!0,transitionProps:{transition:"fade-up",duration:300},children:[(0,n.jsx)(u.W.Target,{children:e.children}),(0,n.jsxs)(u.W.Dropdown,{className:"min-w-40",children:[(0,n.jsxs)(c.s,{justify:"space-between",children:[(0,n.jsx)(u.W.Label,{fw:600,children:s("Knowledge Base")}),(0,n.jsx)(u.W.Label,{children:(0,n.jsx)(pe.N_,{to:"/settings/knowledge-base",children:(0,n.jsx)(ce.A,{size:16,color:"var(--mantine-color-chatbox-tertiary-text)"})})})]}),t?.map((t=>(0,n.jsx)(u.W.Item,{onClick:()=>e.onSelect?.(t),children:(0,n.jsxs)(c.s,{justify:"space-between",align:"center",gap:"xs",children:[(0,n.jsxs)(c.s,{gap:"xs",align:"center",children:[(0,n.jsx)(le.A,{size:14}),(0,n.jsx)(h.E,{c:t.id===e.currentKnowledgeBaseId?"chatbox-brand":"",children:t.name})]}),t.id===e.currentKnowledgeBaseId&&(0,n.jsx)(de.A,{size:14,color:"var(--mantine-color-chatbox-brand-filled)"})]})},t.id))),0===t?.length&&(0,n.jsx)(ae.Y,{justify:"center",className:"w-full",children:(0,n.jsx)(pe.N_,{to:"/settings/knowledge-base",className:"w-full",children:(0,n.jsxs)(p.$,{size:"xs",variant:"light",w:"100%",children:[(0,n.jsx)(ue.A,{size:14,className:"mr-1"}),s("Create")]})})})]})]})};var me=s(79436),ge=s(20709),be=s(18871),fe=s(79094),je=s(2432);const ve=({status:e})=>e?.error?(0,n.jsx)(l.m,{label:e.error,withArrow:!0,color:"chatbox-error",multiline:!0,w:260,children:(0,n.jsx)("div",{className:"rounded-full size-[6.6px] bg-red-500"})}):(0,n.jsx)("div",{className:(0,_.cn)("rounded-full size-[6.6px]",(!e||"idle"===e?.state)&&"bg-gray-500","running"===e?.state&&"bg-green-500","starting"===e?.state&&"bg-blue-500 animate-pulse","stopping"===e?.state&&"bg-yellow-500 animate-pulse",e?.error&&"bg-red-500")});var ye=s(40013);const we=({item:e,onEnabledChange:t})=>{const s=(0,ge.d)(e.id);return(0,n.jsx)(u.W.Item,{c:"chatbox-primary",leftSection:(0,n.jsx)(ve,{status:s}),rightSection:(0,n.jsx)(je.d,{checked:e.enabled,size:"xs",disabled:"starting"===s?.state||"stopping"===s?.state,onChange:s=>t(e.id,s.currentTarget.checked)}),children:e.name})},ke=({children:e})=>{const{t}=(0,D.Bd)(),{settings:s}=(0,be.t0)(),r=(0,ye.PD)(),i=(0,ge.v)(),o=s.mcp.servers.filter((e=>e.enabled)).length+s.mcp.enabledBuiltinServers.length;return(0,n.jsxs)(u.W,{shadow:"md",withArrow:!0,width:240,closeOnItemClick:!1,position:"top",transitionProps:{transition:"fade-up",duration:300},children:[(0,n.jsx)(u.W.Target,{children:e(o)}),(0,n.jsxs)(u.W.Dropdown,{children:[(0,n.jsxs)(c.s,{justify:"space-between",children:[(0,n.jsx)(u.W.Label,{fw:600,children:"MCP"}),(0,n.jsx)(u.W.Label,{children:(0,n.jsx)(pe.N_,{to:"/settings/mcp",children:(0,n.jsx)(ce.A,{size:16,color:"var(--mantine-color-chatbox-tertiary-text)"})})})]}),r&&(0,n.jsxs)(n.Fragment,{children:[fe.u.map((e=>(0,n.jsx)(we,{item:{id:e.id,name:e.name,enabled:s.mcp.enabledBuiltinServers.includes(e.id)},onEnabledChange:i},e.id))),(0,n.jsx)(u.W.Divider,{})]}),s.mcp.servers.map((e=>(0,n.jsx)(we,{item:e,onEnabledChange:i},e.id))),!s.mcp.servers.length&&!s.mcp.enabledBuiltinServers.length&&(0,n.jsx)(ae.Y,{justify:"center",children:(0,n.jsx)(pe.N_,{to:"/settings/mcp",children:(0,n.jsx)(p.$,{size:"xs",my:12,variant:"outline",children:t("Add your first MCP server")})})})]})]})};var Ce=s(29819);const Ae=(0,M.forwardRef)((({sessionId:e,sessionType:t="chat",generating:s=!1,model:E,fullWidth:T=!1,onSelectModel:Z,onSubmit:J,onStopGenerating:ee,onStartNewThread:se,onRollbackThread:ne,onClickSessionSettings:re},ie)=>{const{t:ae}=(0,D.Bd)(),ce=(0,P.L0)(),{height:le}=(0,x.l)(),de=(0,B.md)(V.LC),pe=(0,B.md)(V.nL),ue=(0,B.md)(V.Zl)||T,[he,ge]=(0,M.useState)(""),[be,fe]=(0,M.useState)([]),[je,ve]=(0,M.useState)([]),[ye,we]=(0,B.fp)(V.b8),[Ae,Se]=(0,B.fp)(V.Zs),Ne=e||"default",Be="new"===Ne,We=Be?Ae.knowledgeBase:ye[Ne],ze=(0,M.useCallback)((e=>{Be?Se((t=>({...t,knowledgeBase:e}))):we((t=>{if(void 0===e){const{[Ne]:e,...s}=t;return s}return{...t,[Ne]:e}}))}),[Ne,Be,we,Se]),[Me,Ie]=(0,B.fp)(V.bH),[De,Ee]=(0,B.fp)(V.O0),Te=(0,M.useRef)(null),Ke=(0,M.useRef)(null),Le=(0,M.useMemo)((()=>!(he.trim()||De?.length||je?.length||be?.length)),[he,De,je,be]),{providers:Pe}=(0,L.u)(),_e=(0,M.useMemo)((()=>{if(!E)return ae("Select Model");const e=Pe.find((e=>e.id===E.provider)),t=(e?.models||e?.defaultSettings?.models)?.find((e=>e.modelId===E.modelId));return`${t?.nickname||E.modelId}`}),[Pe,E,ae]),[Oe,Fe]=(0,M.useState)(!1);(0,M.useEffect)((()=>{if(Oe){const e=()=>{Fe(!1),document.removeEventListener("click",e)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}}),[Oe]);const[He,qe]=(0,M.useState)(!1);(0,M.useEffect)((()=>{if(He){const e=setTimeout((()=>{qe(!1)}),5e3);return()=>{clearTimeout(e)}}}),[He]);const Re=(0,M.useRef)(null);(0,M.useImperativeHandle)(ie,(()=>({setQuote:e=>{ge((t=>`${t}\n\n${e}`)),X.Wp(),X.iH()}})),[]);const{addInputBoxHistory:$e,getPreviousHistoryInput:Ge,getNextHistoryInput:Ue,resetHistoryIndex:Xe}=K(),Ve=async(e=!0)=>{if(!Le&&!s){if(!E)return await(0,$.c)(100),void Fe(!0);try{if(!await(J?.({input:he,pictureKeys:be,attachments:je,links:De,needGenerating:e})))return;ge(""),fe([]),ve([]),Ee([]),qe(!1),(0,O.i)("send_message",{event_category:"user"}),"mobile"!==H.A.type&&$e(he)}catch(e){console.error("Error submitting message:",e),Y.W(e?.message||ae("An error occurred while sending the message."))}}},Ye=(0,M.useCallback)((e=>{const t=e.target.value;ge(t),Xe()}),[Xe]),Qe=e=>{let t=[...De||[],...e.map((e=>({url:e})))];t=z().uniqBy(t,"url"),t=t.slice(-6),Ee(t)},Ze=async e=>{for(const t of e)if(t.type.startsWith("image/")){const e=await F.kZ(t),s=R.CB.picture("input-box");await q.A.setBlob(s,e),fe((e=>[...e,s].slice(-8)))}else ve((e=>[...e,t].slice(-10)))},Je=e=>{e.target.files&&(Ze(Array.from(e.target.files)),e.target.value="",X.Wp())},et=()=>{Te.current?.click()},tt=()=>{Ke.current?.click()},st=async()=>{const e=await r.Ay.show("attach-link");e&&Qe(e)},{getRootProps:nt,getInputProps:rt}=(0,I.VB)({onDrop:e=>{Ze(e)},noClick:!0,noKeyboard:!0}),[it,ot]=(0,B.fp)(V.uj);(0,M.useEffect)((()=>{""!==it&&(ot(""),ge((e=>{if(e){const t=e.match(/(\n)+$/)?.[0].length||0;return console.log(t,Math.max(0,2-t)),e+"\n".repeat(Math.max(0,2-t))+it}return it})),X.Wp(),X.iH())}),[it]);const at=(0,M.useCallback)((e=>{e&&e.id!==We?.id?(ze((0,W.pick)(e,"id","name")),(0,U.s)("knowledge_base_enabled",{knowledge_base_name:e.name})):(ze(void 0),(0,U.s)("knowledge_base_disabled",{knowledge_base_name:We?.name}))}),[We,ze]);return(0,n.jsxs)(i.a,{pt:0,pb:ce?"md":"sm",px:ce?"0.3rem":"1rem",id:X.RK,...nt(),onClick:()=>{Re.current?.focus()},children:[(0,n.jsx)("input",{className:"hidden",...rt()}),(0,n.jsxs)(o.B,{className:(0,_.cn)("rounded-lg sm:rounded-md bg-[var(--mantine-color-chatbox-background-secondary-text)] border border-solid border-[var(--mantine-color-chatbox-border-primary-outline)] justify-between",ue?"w-full":"max-w-4xl mx-auto",!ce&&"min-h-[92px]"),gap:0,children:[(0,n.jsx)(a.T,{unstyled:!0,classNames:{input:"block w-full outline-none border-none px-sm pt-sm pb-sm resize-none bg-transparent text-[var(--mantine-color-chatbox-primary-text)]"},size:"sm",id:X.tY,ref:Re,placeholder:ae("Type your question here...")||"",bg:"transparent",autosize:!0,minRows:1,maxRows:Math.max(3,Math.floor(le/100)),value:he,autoFocus:!ce,onChange:Ye,onKeyDown:e=>{const t={"":!1,Enter:!(13!==e.keyCode||e.shiftKey||e.ctrlKey||e.altKey||e.metaKey),"CommandOrControl+Enter":13===e.keyCode&&(e.ctrlKey||e.metaKey)&&!e.shiftKey,"Ctrl+Enter":13===e.keyCode&&e.ctrlKey&&!e.shiftKey,"Command+Enter":13===e.keyCode&&e.metaKey,"Shift+Enter":13===e.keyCode&&e.shiftKey,"Ctrl+Shift+Enter":13===e.keyCode&&e.ctrlKey&&e.shiftKey};if(t[pe.inpubBoxSendMessage]){if("mobile"===H.A.type&&ce&&"Enter"===pe.inpubBoxSendMessage)return;return e.preventDefault(),void Ve()}if(t[pe.inpubBoxSendMessageWithoutResponse])return e.preventDefault(),void Ve(!1);if(("ArrowUp"===e.key||"ArrowDown"===e.key)&&Re.current&&Re.current===document.activeElement&&(0===he.length||window.getSelection()?.toString()===he))if(e.preventDefault(),"ArrowUp"===e.key){const e=Ge();void 0!==e&&(ge(e),setTimeout((()=>Re.current?.select()),10))}else if("ArrowDown"===e.key){const e=Ue();void 0!==e&&(ge(e),setTimeout((()=>Re.current?.select()),10))}},onPaste:e=>{if("picture"!==t&&e.clipboardData?.items){let t=!1;for(const s of e.clipboardData.items)if("file"!==s.kind)t=!0,"string"===s.kind&&"text/plain"===s.type&&s.getAsString((e=>{const t=e.trim();if(t.startsWith("http://")||t.startsWith("https://")){const e=t.split(/\s+/).map((e=>e.trim())).filter((e=>e.startsWith("http://")||e.startsWith("https://")));Qe(e)}if(de&&t.length>3e3){const t=new File([e],`pasted_text_${je?.length||0}.txt`,{type:"text/plain"});Ze([t]),ge(he)}}));else{const e=s.getAsFile();e&&Ze([e])}t||e.preventDefault()}}}),(!!be.length||!!je.length||!!De.length)&&(0,n.jsxs)(c.s,{px:"sm",pb:"xs",align:"center",wrap:"wrap",onClick:()=>X.Wp(),children:[be?.map((e=>(0,n.jsx)(Q.pv,{storageKey:e,onDelete:()=>(async e=>{fe(be?.filter((t=>t!==e)))})(e)},e))),je?.map((e=>(0,n.jsx)(Q.q9,{name:e.name,fileType:e.type,onDelete:()=>ve(je.filter((t=>t.name!==e.name)))},e.name+e.lastModified))),De?.map((e=>(0,n.jsx)(Q.is,{url:e.url,onDelete:()=>Ee(De.filter((t=>t.url!==e.url)))},e.url)))]}),(0,n.jsxs)(c.s,{px:"sm",pb:"sm",align:"flex-end",justify:"space-between",gap:"lg",children:[(0,n.jsxs)(c.s,{gap:"md",flex:"0 1 auto",className:"!hidden sm:!flex",children:[He?(0,n.jsx)(l.m,{label:ae("Back to Previous"),withArrow:!0,position:"top-start",children:(0,n.jsx)(d.M,{size:"sm",variant:"subtle",color:"chatbox-secondary",onClick:()=>{const e=ne?.();e&&qe(!1)},children:(0,n.jsx)(m.A,{strokeWidth:1.8})})}):(0,n.jsx)(l.m,{label:(0,n.jsxs)(o.B,{align:"center",gap:"xxs",pb:"xxs",children:[(0,n.jsx)("div",{className:"whitespace-nowrap",children:ae("Start a New Thread")}),(0,n.jsx)(c.s,{align:"center",children:(0,n.jsx)(Ce.D,{keys:pe.messageListRefreshContext.split("+"),size:"small",opacity:.7})})]}),withArrow:!0,position:"top-start",children:(0,n.jsx)(d.M,{size:"24px",variant:"subtle",color:"chatbox-secondary",disabled:!se,onClick:()=>{const e=se?.();e&&qe(!0)},children:(0,n.jsx)(g.A,{strokeWidth:1.8})})}),"picture"!==t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"file",ref:Te,className:"hidden",onChange:Je,accept:"image/png, image/jpeg",multiple:!0}),(0,n.jsx)(l.m,{label:ae("Attach Image"),withArrow:!0,position:"top",children:(0,n.jsx)(d.M,{size:"24px",variant:"subtle",color:"chatbox-secondary",onClick:et,children:(0,n.jsx)(b.A,{strokeWidth:1.8})})}),(0,n.jsx)("input",{type:"file",ref:Ke,className:"hidden",onChange:Je,multiple:!0}),(0,n.jsx)(l.m,{label:ae("Select File"),withArrow:!0,position:"top",children:(0,n.jsx)(d.M,{size:"24px",variant:"subtle",color:"chatbox-secondary",onClick:tt,children:(0,n.jsx)(f.A,{strokeWidth:1.8})})}),(0,n.jsx)(l.m,{label:ae("Attach Link"),withArrow:!0,position:"top",children:(0,n.jsx)(d.M,{size:"24px",variant:"subtle",color:"chatbox-secondary",onClick:st,children:(0,n.jsx)(j.A,{strokeWidth:1.8})})}),(0,n.jsx)(l.m,{label:(0,n.jsxs)(o.B,{align:"center",gap:"xxs",pb:"xxs",children:[(0,n.jsx)("div",{className:"whitespace-nowrap",children:ae("Web Browsing")}),(0,n.jsx)(c.s,{align:"center",children:(0,n.jsx)(Ce.D,{keys:pe.inputBoxWebBrowsingMode.split("+"),size:"small",opacity:.7})})]}),withArrow:!0,position:"top",children:(0,n.jsx)(d.M,{size:"24px",variant:"subtle",color:Me?"chatbox-brand":"chatbox-secondary",onClick:()=>{Ie(!Me),X.Wp()},children:(0,n.jsx)(v.A,{strokeWidth:1.8})})}),G.o.mcp&&(0,n.jsx)(ke,{children:e=>e>0?(0,n.jsx)(p.$,{radius:"md",variant:"light",h:"auto",w:"auto",px:"xs",py:0,children:(0,n.jsxs)(c.s,{gap:"3xs",align:"center",children:[(0,n.jsx)(y.A,{strokeWidth:1.8,size:22}),(0,n.jsx)("span",{children:e})]})}):(0,n.jsx)(d.M,{size:"24px",variant:"subtle",color:"chatbox-secondary",children:(0,n.jsx)(y.A,{strokeWidth:1.8})})}),G.o.knowledgeBase&&(0,n.jsx)(xe,{currentKnowledgeBaseId:We?.id,onSelect:at,children:(0,n.jsx)(l.m,{label:ae("Knowledge Base"),withArrow:!0,position:"top",children:(0,n.jsx)(d.M,{size:"24px",variant:"subtle",color:We?"chatbox-brand":"chatbox-secondary",children:(0,n.jsx)(w.A,{strokeWidth:1.8})})})})]}),(0,n.jsx)(l.m,{label:ae("Customize settings for the current conversation"),withArrow:!0,position:"top",children:(0,n.jsx)(d.M,{size:"24px",variant:"subtle",color:"chatbox-secondary",disabled:!re,onClick:re,children:(0,n.jsx)(k.A,{strokeWidth:1.8})})})]}),(0,n.jsx)(c.s,{className:"sm:!hidden",gap:"xs",children:"picture"!==t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.W,{shadow:"md",position:"top-start",children:[(0,n.jsx)(u.W.Target,{children:(0,n.jsx)(d.M,{variant:"transparent",w:20,h:20,miw:20,mih:20,bd:"none",color:"chatbox-secondary",children:(0,n.jsx)(C.A,{strokeWidth:1.8})})}),(0,n.jsxs)(u.W.Dropdown,{children:[(0,n.jsx)(u.W.Item,{leftSection:(0,n.jsx)(b.A,{size:16}),onClick:et,children:ae("Attach Image")}),(0,n.jsx)(u.W.Item,{leftSection:(0,n.jsx)(f.A,{size:16}),onClick:tt,children:ae("Select File")}),(0,n.jsx)(u.W.Item,{leftSection:(0,n.jsx)(j.A,{size:16}),onClick:st,children:ae("Attach Link")})]})]}),(0,n.jsx)(d.M,{variant:"transparent",w:20,h:20,miw:20,mih:20,bd:"none",color:Me?"chatbox-brand":"chatbox-secondary",onClick:()=>{Ie(!Me),X.Wp()},children:(0,n.jsx)(v.A,{strokeWidth:1.8})}),(0,n.jsx)(d.M,{variant:"transparent",w:20,h:20,miw:20,mih:20,bd:"none",color:"chatbox-secondary",disabled:!re,onClick:re,children:(0,n.jsx)(k.A,{strokeWidth:1.8})})]}):null}),(0,n.jsxs)(c.s,{gap:ce?"xxs":"sm",align:"flex-end",justify:"flex-end",children:[(0,n.jsx)(l.m,{label:ae("Please select a model"),color:"chatbox-error",opened:Oe,withArrow:!0,children:"picture"===t?(0,n.jsx)(te,{onSelect:Z,children:(0,n.jsxs)("span",{className:"flex items-center text-sm opacity-70 cursor-pointer bg-transparent hover:bg-slate-400/25 h-6",children:[Pe.find((e=>e.id===E?.provider))?.name||E?.provider||ae("Select Model"),(0,n.jsx)(A.A,{size:16,className:"opacity-50"})]})}):(0,n.jsx)(me.A,{onSelect:Z,children:(0,n.jsxs)(c.s,{gap:"xxs",px:ce?0:"xs",align:"center",className:(0,_.cn)("cursor-pointer hover:bg-slate-400/25 rounded-lg",!ce&&"py-1"),children:[!!E&&(0,n.jsx)(oe,{size:ce?20:24,provider:E.provider}),(0,n.jsx)(h.E,{size:ce?"xs":"sm",className:"line-clamp-1",children:_e}),(0,n.jsx)(A.A,{size:20,className:"flex-[0_0_auto] text-[var(--mantine-color-chatbox-tertiary-text)]"})]})})}),(0,n.jsx)(d.M,{disabled:Le&&!s,radius:18,size:ce?28:36,onClick:s?ee:()=>Ve(),className:(0,_.cn)(Le&&!s&&"!text-white !bg-[var(--mantine-color-chatbox-background-tertiary-text)]"),children:s?(0,n.jsx)(S.A,{size:20}):(0,n.jsx)(N.A,{size:20})})]})]})]})]})}))},29819:(e,t,s)=>{"use strict";s.d(t,{D:()=>b,V:()=>f});var n=s(74848),r=s(23667),i=s(34195),o=s(24597),a=s(74875),c=s(11507),l=s(85091),d=s(40054),p=s(4913),u=s(53987),h=s(82056),x=s(67731);const m=(0,r.R0)();function g(e){const t={ctrl:"Ctrl",command:"Ctrl",mod:"Ctrl",option:"Alt",alt:"Alt",shift:"Shift",enter:"⏎",tab:"Tab",up:"↑",down:"↓",left:"←",right:"→"},s={...t,meta:"⌘",mod:"⌘",command:"⌘",option:"⌥",alt:"⌥",tab:"⇥"},n={...t,meta:"Win"},r={...t,meta:"Super",mod:"Super",command:"Super"};if(!e)return"";const i=e.toLowerCase(),o=1===e.length?e.toUpperCase():e;switch(m){case"Mac":return s[i]||o;case"Windows":return n[i]||o;case"Linux":return r[i]||o;default:return t[i]||o}}function b(e){const t=void 0!==e.opacity?"opacity-"+100*e.opacity:"";return(0,n.jsx)("span",{className:`inline-block px-1 ${t} ${e.className||""}`,children:e.keys.map(((e,t)=>(0,n.jsx)(a.u,{className:"mr-3xs",children:g(e)},e+t)))})}function f(e){const{shortcuts:t,setShortcuts:s}=e,{t:r}=(0,i.Bd)(),a=[{label:r("Show/Hide the Application Window"),name:"quickToggle",keys:t.quickToggle,options:o.T$},{label:r("Focus on the Input Box"),name:"inputBoxFocus",keys:t.inputBoxFocus},{label:r("Focus on the Input Box and Enter Web Browsing Mode"),name:"inputBoxWebBrowsingMode",keys:t.inputBoxWebBrowsingMode},{label:r("Send"),name:"inpubBoxSendMessage",keys:t.inpubBoxSendMessage,options:o.t9},{label:r("Send Without Generating Response"),name:"inpubBoxSendMessageWithoutResponse",keys:t.inpubBoxSendMessageWithoutResponse,options:o.t9},{label:r("Create a New Conversation"),name:"newChat",keys:t.newChat},{label:r("Create a New Image-Creator Conversation"),name:"newPictureChat",keys:t.newPictureChat},{label:r("Navigate to the Next Conversation"),name:"sessionListNavNext",keys:t.sessionListNavNext},{label:r("Navigate to the Previous Conversation"),name:"sessionListNavPrev",keys:t.sessionListNavPrev},{label:r("Navigate to the Specific Conversation"),keys:"mod+1-9"},{label:r("Start a New Thread"),name:"messageListRefreshContext",keys:t.messageListRefreshContext},{label:r("Show/Hide the Search Dialog"),name:"dialogOpenSearch",keys:t.dialogOpenSearch},{label:r("Navigate to the Previous Option (in search dialog)"),keys:t.optionNavUp},{label:r("Navigate to the Next Option (in search dialog)"),keys:t.optionNavDown},{label:r("Select the Current Option (in search dialog)"),keys:t.optionSelect}],d=(e,t)=>{for(const s of a)if(s.name&&s.name!==e&&s.keys===t)return!0;return!1};return(0,n.jsx)(c.a,{className:"border border-solid  py-xs px-md rounded-xs border-[var(--mantine-color-chatbox-border-primary-outline)]",children:(0,n.jsxs)(l.X,{children:[(0,n.jsx)(l.X.Thead,{children:(0,n.jsxs)(l.X.Tr,{children:[(0,n.jsx)(l.X.Th,{children:r("Action")}),(0,n.jsx)(l.X.Th,{children:r("Hotkeys")})]})}),(0,n.jsx)(l.X.Tbody,{children:a.map((({name:e,label:r,keys:i,options:o},a)=>(0,n.jsxs)(l.X.Tr,{children:[(0,n.jsx)(l.X.Td,{children:r}),(0,n.jsx)(l.X.Td,{children:o?(0,n.jsx)(v,{options:o,value:i,onSelect:n=>{e&&s&&s({...t,[e]:n})},isConflict:!!e&&d(e,i)}):(0,n.jsx)(j,{shortcut:i,isConflict:!!e&&d(e,i),className:"ml-sm"})})]},`${e}-${a}`)))})]})})}function j(e){const{shortcut:t,isConflict:s,className:r}=e,{t:o}=(0,i.Bd)();return""===t?(0,n.jsx)("span",{className:`px-2 py-0.5 text-xs ${r||""}`,children:o("None")}):(0,n.jsxs)(d.s,{align:"center",component:"span",className:`py-0.5 text-xs ${r||""}`,c:"chatbox-error",children:[(0,n.jsx)(b,{keys:t.split("+")}),s&&(0,n.jsx)(x.A,{size:16})]})}function v({options:e,value:t,onSelect:s,isConflict:r}){const i=(0,p.B)({onDropdownClose:()=>i.resetSelectedOption()});return(0,n.jsxs)(u.G,{store:i,onOptionSubmit:e=>{s?.(e),i.closeDropdown()},children:[(0,n.jsx)(u.G.Target,{targetType:"button",children:(0,n.jsx)(h.O,{maw:160,component:"button",type:"button",pointer:!0,rightSection:(0,n.jsx)(u.G.Chevron,{}),rightSectionPointerEvents:"none",onClick:()=>i.toggleDropdown(),children:(0,n.jsx)(j,{shortcut:t,isConflict:r})})}),(0,n.jsx)(u.G.Dropdown,{children:(0,n.jsx)(u.G.Options,{children:e.map((e=>(0,n.jsx)(u.G.Option,{value:e,children:(0,n.jsx)(j,{shortcut:e})},e)))})})]})}},77439:(e,t,s)=>{"use strict";s.d(t,{IM:()=>a,Pe:()=>d,gV:()=>l,hj:()=>c});var n=s(36920),r=s(97286),i=s(6475),o=s(97665);const a=()=>(0,r.I)({queryKey:["knowledge-bases"],queryFn:async()=>n.A.getKnowledgeBaseController().list()}),c=e=>(0,r.I)({queryKey:["knowledge-base-files-count",e],queryFn:async()=>{if(!e)return 0;return n.A.getKnowledgeBaseController().countFiles(e)},enabled:!!e}),l=(e,t=20)=>(0,i.q)({queryKey:["knowledge-base-files",e,t],queryFn:async({pageParam:s=0})=>{if(!e)return{files:[],nextCursor:null};const r=n.A.getKnowledgeBaseController(),i=await r.listFilesPaginated(e,s*t,t);return{files:i,nextCursor:i.length===t?s+1:null}},getNextPageParam:e=>e.nextCursor,enabled:!!e,initialPageParam:0}),d=()=>{const e=(0,o.jE)();return{invalidateFiles:t=>{e.invalidateQueries({queryKey:["knowledge-base-files",t]}),e.invalidateQueries({queryKey:["knowledge-base-files-count",t]})}}}},20709:(e,t,s)=>{"use strict";s.d(t,{d:()=>l,v:()=>d});var n=s(96540),r=s(40374),i=s(18871),o=s(79094),a=s(2543),c=s(33351);function l(e){const[t,s]=(0,n.useState)(null);return(0,n.useEffect)((()=>r.H.subscribeToServerStatus(e,s)),[e]),t}function d(){const[e,t]=(0,i.lF)();return(0,n.useCallback)(((e,s)=>{let n=null;const i=o.u.some((t=>t.id===e));t(i?t=>{const r=t.mcp.enabledBuiltinServers;if(s){r.includes(e)||r.push(e);const t=(0,o.h)(e);t&&(n={action:"start",config:t})}else{const t=r.indexOf(e);-1!==t&&r.splice(t,1),n={action:"stop",id:e}}}:t=>{t.mcp.servers.forEach((t=>{t.id===e&&(t.enabled=s,n=s?{action:"start",config:(0,a.cloneDeep)(t)}:{action:"stop",id:e})}))}),"start"===n?.action?r.H.startServer(n.config):"stop"===n?.action&&r.H.stopServer(n.id),(0,c.s)("toggle_mcp_server",{id:e,enabled:s})}),[t])}},79094:(e,t,s)=>{"use strict";s.d(t,{h:()=>o,u:()=>i});var n=s(60506),r=s(98200);const i=[{id:"fetch",name:"Fetch",description:r.A.t("This server enables LLMs to retrieve and process content from web pages, converting HTML to markdown for easier consumption."),url:"https://mcp.chatboxai.app/fetch"},{id:"sequentialthinking",name:"Sequential Thinking",description:r.A.t("An MCP server implementation that provides a tool for dynamic and reflective problem-solving through a structured thinking process."),url:"https://mcp.chatboxai.app/sequentialthinking"},{id:"edgeone-pages",name:"EdgeOne Pages",description:r.A.t("Deploy HTML content to EdgeOne Pages and obtaining an accessible public URL."),url:"https://mcp.chatboxai.app/edgeone-pages"},{id:"arxiv",name:"arXiv",description:r.A.t("MCP server for accessing arXiv papers"),url:"https://mcp.chatboxai.app/arxiv"},{id:"context7",name:"Context7",description:r.A.t("Retrieves up-to-date documentation and code examples for any library."),url:"https://mcp.chatboxai.app/context7"}];function o(e,t){const s=i.find((t=>t.id===e));if(!s)return null;const r=t||(0,n.VW)();return{id:e,name:s.name,enabled:!0,transport:{type:"http",url:s.url,headers:r?{"x-chatbox-license":r}:void 0}}}},83884:(e,t,s)=>{"use strict";s.d(t,{o:()=>r});var n=s(36920);const r={mcp:"desktop"===n.A.type,knowledgeBase:"desktop"===n.A.type}},2552:(e,t,s)=>{var n={"./azure.png":64625,"./chatbox-ai.png":14346,"./chatglm-6b.png":57171,"./claude.png":33364,"./deepseek.png":20780,"./gemini.png":53283,"./groq.png":98345,"./lm-studio.png":63328,"./ollama.png":96880,"./openai.png":98828,"./perplexity.png":38368,"./siliconflow.png":11823,"./volcengine.png":49142,"./xAI.png":2918,"renderer/static/icons/providers/azure.png":64625,"renderer/static/icons/providers/chatbox-ai.png":14346,"renderer/static/icons/providers/chatglm-6b.png":57171,"renderer/static/icons/providers/claude.png":33364,"renderer/static/icons/providers/deepseek.png":20780,"renderer/static/icons/providers/gemini.png":53283,"renderer/static/icons/providers/groq.png":98345,"renderer/static/icons/providers/lm-studio.png":63328,"renderer/static/icons/providers/ollama.png":96880,"renderer/static/icons/providers/openai.png":98828,"renderer/static/icons/providers/perplexity.png":38368,"renderer/static/icons/providers/siliconflow.png":11823,"renderer/static/icons/providers/volcengine.png":49142,"renderer/static/icons/providers/xAI.png":2918};function r(e){var t=i(e);return s(t)}function i(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=2552},64625:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/azure.c19de46bd77f1a9281ce.png"},14346:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/chatbox-ai.81d86f753928e5bf6d7a.png"},57171:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/chatglm-6b.ae67e9df5223ba8b3b24.png"},33364:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/claude.105cfa798a4daf8250f9.png"},20780:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/deepseek.9acdbf1fe3d35a8f164f.png"},53283:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/gemini.8cbd2b842c6278d2e482.png"},98345:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/groq.6b2a9c5b119acc956680.png"},63328:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/lm-studio.4ad173cc5d8cef7c6343.png"},96880:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/ollama.e9a3cad3b70b2483ff1b.png"},98828:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/openai.41b3bffc92d9beb143d0.png"},38368:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/perplexity.0d0ae5284efa8405a8a2.png"},11823:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/siliconflow.53ddab08359f27eda8b2.png"},49142:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/volcengine.6aebc97f7b72d7fabed6.png"},2918:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/xAI.b114d748b1690e31f5c3.png"}}]);