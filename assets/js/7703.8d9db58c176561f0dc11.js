"use strict";(self.webpackChunkxyz_chatboxapp_ce=self.webpackChunkxyz_chatboxapp_ce||[]).push([[7703],{37703:(e,t,s)=>{s.r(t),s.d(t,{tickStorageTask:()=>f});var a=s(12268),o=s(52035),r=s(80316),n=s(36920),i=s(46929);async function f(){const e=await a.A.getBlobKeys(),t=["picture:","file:","parseUrl-","parseFile-"],s=e.filter((e=>t.some((t=>e.startsWith(t)))));if(0===s.length)return;const n=new Set(s),f=(0,o.zp)(),c=f.get(r.t6);for(const e of c){const t=await a.A.getItem(i.CB.session(e.id),null);if(t){for(const e of t.messages){for(const t of e.pictures||[])t.storageKey&&n.delete(t.storageKey);for(const t of e.files||[])t.storageKey&&n.delete(t.storageKey);for(const t of e.contentParts||[])"image"===t.type&&t.storageKey&&n.delete(t.storageKey);for(const t of e.links||[])t.storageKey&&n.delete(t.storageKey);if(0===n.size)return}t.assistantAvatarKey&&n.delete(t.assistantAvatarKey)}}const l=f.get(r.FU);l.userAvatarKey&&n.delete(l.userAvatarKey),l.defaultAssistantAvatarKey&&n.delete(l.defaultAssistantAvatarKey);for(const e of n)await a.A.delBlob(e)}"desktop"!==n.A.type&&setTimeout((()=>{f()}),1e4)}}]);